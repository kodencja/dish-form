(this["webpackJsonpdish-form"]=this["webpackJsonpdish-form"]||[]).push([[0],{150:function(e,t,a){var n={"./pizza.jpg":151,"./sandwich.jpg":152,"./soup.jpg":153,"./veg10.jpg":154,"./veg4.jpg":155,"./veg8.jpg":156};function c(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=r,e.exports=c,c.id=150},151:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/pizza.a8e2abcd.jpg"},152:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/sandwich.4c85b99e.jpg"},153:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/soup.eae9ab6c.jpg"},154:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/veg10.e9165112.jpg"},155:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/veg4.5db3e508.jpg"},156:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/veg8.d77e34bf.jpg"},157:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(40),s=a.n(r),i=(a(49),a(7)),o=a.n(i),l=a(11),u=a(42),d=a(6),p=a(3),m=a(43),b=a(44),j=a(1),f=["tagType","title","errorMsg","optionNames"],h=c.a.forwardRef((function(e,t){var a=e.tagType,c=e.title,r=e.errorMsg,s=e.optionNames,i=void 0===s?"":s,o=Object(b.a)(e,f),l=Object(n.useContext)(S).onState,u=l.preparation_time,d=l.type,h=l.no_of_slices,O=l.diameter,v=l.spiciness_scale,y=l.slices_of_bread,g=l.outputStyle,x=l.loading,_=l.validationFinished,N=o.name,k=Object(n.useMemo)((function(){return"select"===a?Object(m.a)(i).map((function(e,t){return"default"===e?Object(j.jsx)("option",{defaultValue:!0,hidden:!0,label:" ",children:"select an option"},t):Object(j.jsx)("option",{value:e,children:e},t)})):null}),[d]),w=Object(n.useMemo)((function(){return Object(j.jsxs)("div",{className:"input-block",children:[Object(j.jsx)("label",{htmlFor:N,children:c}),Object(j.jsx)("select",Object(p.a)(Object(p.a)({},o),{},{ref:t,children:k})),r&&Object(j.jsx)("span",{className:"invalid-feedback",children:r})]})}),[d,x,_]),C=Object(n.useMemo)((function(){return Object(j.jsxs)("div",{className:"input-block",children:[Object(j.jsx)("label",{htmlFor:N,children:c}),Object(j.jsx)("input",Object(p.a)(Object(p.a)({},o),{},{ref:t})),r&&Object(j.jsx)("span",{className:"invalid-feedback",children:r})]})}),[u,d.val,h,O,l.name,y,N]),T=Object(n.useMemo)((function(){return Object(j.jsxs)("div",{className:"input-block",children:[Object(j.jsx)("label",{htmlFor:N,children:c}),Object(j.jsx)("input",Object(p.a)(Object(p.a)({},o),{},{ref:t})),Object(j.jsx)("output",{className:"bubble",style:g,htmlFor:N,children:l[N].val}),r&&Object(j.jsx)("span",{className:"invalid-feedback",children:r})]})}),[d,v,g]);return Object(j.jsx)(j.Fragment,{children:"input"===a?C:"select"===a?w:T})})),O=c.a.memo(h),v=c.a.forwardRef((function(e,t){var a=e.onTypeVal,c=e.onSubmit,r=Object(n.useContext)(S),s=r.onState,i=r.onChanging,o=r.onAddToInputRef,l=s.name,u=s.preparation_time,d=s.type,p=s.no_of_slices,m=s.diameter,b=s.spiciness_scale,f=s.slices_of_bread,h=s.outputStyle;Object(n.useEffect)((function(){}));var v=Object(n.useMemo)((function(){return Object(j.jsx)("div",{className:"mrg-x-auto",children:Object(j.jsx)("div",{className:"input-cont",children:Object(j.jsxs)("div",{className:"flex hide-up trans",ref:o,children:[Object(j.jsx)("div",{className:"one-column",children:Object(j.jsx)(O,{tagType:"input",title:"No of slices",name:"no_of_slices",type:"number",id:"no_of_slices",className:"form-control",step:1,"aria-label":"no_of_slices",required:"pizza"===a,min:1,max:30,value:p.val,onChange:i,errorMsg:p.check})}),Object(j.jsx)("div",{className:"one-column",children:Object(j.jsx)(O,{tagType:"input",title:"diameter",name:"diameter",type:"number",id:"diameter",className:"form-control",step:.1,"aria-label":"diameter",required:"pizza"===a,min:.1,max:50,value:m.val,onChange:i,errorMsg:m.check})})]})})})}),[d,m,p]),y=Object(n.useMemo)((function(){return Object(j.jsx)("div",{className:"mrg-x-auto narrow",children:Object(j.jsx)("div",{className:"input-cont",children:Object(j.jsx)("div",{className:"range hide-left trans",ref:o,children:Object(j.jsx)(O,{tagType:"range",title:"Spiciness scale",name:"spiciness_scale",type:"range",id:"spiciness_scale",className:"form-control form-control-range",step:1,"aria-label":"spiciness_scale",required:"soup"===a,"data-sizing":"px",min:1,max:10,value:b.val,onChange:i,errorMsg:b.check})})})})}),[d,b,h]),g=Object(n.useMemo)((function(){return Object(j.jsx)("div",{className:"mrg-x-auto narrow",children:Object(j.jsx)("div",{className:"input-cont",children:Object(j.jsx)("div",{className:"number-width hide-right trans",ref:o,children:Object(j.jsx)(O,{tagType:"input",title:"No of slices",name:"slices_of_bread",type:"number",id:"slices_of_bread",className:"form-control",step:1,"aria-label":"slices_of_bread",required:"sandwich"===a,min:1,value:f.val,onChange:i,errorMsg:f.check})})})})}),[d,f]);return Object(j.jsxs)("form",{id:"dishes-form",children:[Object(j.jsxs)("div",{className:"row center",children:[Object(j.jsx)("div",{className:"input-cont",children:Object(j.jsx)("div",{className:"hide-left narrow-70 mrg-x-auto trans",ref:o,children:Object(j.jsx)(O,{tagType:"input",title:"Dish name",name:"name",type:"text",id:"name",className:"form-control",placeholder:"Type dish name","aria-label":"name",required:!0,value:l.val,onChange:i,errorMsg:l.check})})}),Object(j.jsx)("div",{className:"input-cont",children:Object(j.jsx)("div",{className:"trans hide-right narrow-70 mrg-x-auto",ref:o,children:Object(j.jsx)(O,{tagType:"input",title:"Preparation time",name:"preparation_time",type:"time",id:"preparation_time",className:"form-control",step:1,"aria-label":"preparation_time",required:!0,min:"00:15:00",pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}",value:u.val,onChange:i,errorMsg:u.check})})}),Object(j.jsx)("div",{className:"input-cont",children:Object(j.jsx)("div",{className:"hide-up narrow-70 mrg-x-auto trans",ref:o,children:Object(j.jsx)(O,{tagType:"select",title:"Type",name:"type",id:"type",className:"form-control form-control-lg",optionNames:["default","pizza","soup","sandwich"],"aria-label":"type",required:!0,value:d.val,onChange:i,errorMsg:d.check})})}),"pizza"===a?v:"soup"===a?y:"sandwich"===a?g:""]}),Object(j.jsx)("div",{className:"row center",children:Object(j.jsx)("div",{className:"buttons col",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-check hide-down",ref:t,onClick:c,children:"Submit"})})})]})})),y=c.a.memo(v),g=(a(52),a(53),a(16)),x=a.n(g),_=function(e){var t=Object(n.useRef)([]),a=Object(n.useRef)(),c=function(e){return a.current="",e.length<8&&(e+=":00"),e<"00:15:00"&&(a.current="We need at least 15 min to prepare the dish!"),{test:new RegExp(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/).test(e),time:e}};return{onValidation:function(n,r){return t.current=[],new Promise((function(s,i){var o,l=0;for(var u in n){l++;var d=n[u].val.toString().split(" ").join("");if(d.length<=0||"NaN"===d)t.current.push(!1),e({type:"input_check",nameObj:"".concat(u),payload:"This field has to be filled in"}),s({arrayOfAllChecksVal:t.current,time:n.preparation_time.val});else if(d.length>30)t.current.push(!1),e({type:"input_check",nameObj:"".concat(u),payload:"Use max 30 characters"}),s({arrayOfAllChecksVal:t.current,time:n.preparation_time.val});else switch(n[u].sort){case"text":x.a.isAlpha(d)?(t.current.push(!0),e({type:"input_check",nameObj:"".concat(u),payload:""})):(t.current.push(!1),e({type:"input_check",nameObj:"".concat(u),payload:"Please use only letters"}));break;case"intNumber":case"floatNumber":if(x.a.isNumeric(d)){var p=void 0;p="intNumber"===u?parseInt(d):parseFloat(d);var m=void 0,b=void 0;null!==n[u].min&&void 0!==n[u].min&&(m=n[u].min),null!==n[u].max&&void 0!==n[u].max&&(b=n[u].max),p<m?(t.current.push(!1),e({type:"input_check",nameObj:"".concat(u),payload:"The number is too small"})):p>b?(t.current.push(!1),e({type:"input_check",nameObj:"".concat(u),payload:"The number is too big"})):(t.current.push(!0),e({type:"input_check",nameObj:"".concat(u),payload:""}))}else t.current.push(!1),e({type:"input_check",nameObj:"".concat(u),payload:"Please use only numbers"});break;case"time":var j=c(d),f=j.test;o=j.time,f?f&&""!==a.current?(t.current.push(!1),e({type:"input_check",nameObj:"".concat(u),payload:a.current})):(t.current.push(!0),e({type:"input_check",nameObj:"".concat(u),payload:""})):(t.current.push(!1),e({type:"input_check",nameObj:"".concat(u),payload:"Please use only numbers in time format"}))}l>=r&&s({arrayOfAllChecksVal:t.current,time:o})}}))}}},N=function(e,t,a,n){var c=getComputedStyle(t),r=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),s=t.clientWidth,i=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--bubble-width")),o=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--thumb-width")),l=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--thumb-border-width"));if(void 0!==t&&null!==t){var u=parseInt(t.getAttribute("min")),d=parseInt(t.getAttribute("max")),p=100*(parseInt(e)-u)/(d-u);return n({type:"outputStyle",payload:p+100*(r/2+1+(o+2*l)/2-i/2)/s-100*(r+(o+2*l))/s*p/100+a}),!1}},k=function(e){var t=e.name,a=e.preparation_time,n=e.type,c=e.no_of_slices,r=e.diameter,s=e.spiciness_scale,i=e.slices_of_bread;return new Promise((function(e,o){var l={name:t,preparation_time:a,type:n};if(void 0===n.val||null===n.val)o("Please select a type");else switch(n.val){case"pizza":e(Object(p.a)(Object(p.a)({},l),{},{no_of_slices:c,diameter:r}));break;case"soup":e(Object(p.a)(Object(p.a)({},l),{},{spiciness_scale:s}));break;case"sandwich":e(Object(p.a)(Object(p.a)({},l),{},{slices_of_bread:i}));break;default:e(Object(p.a)({},l))}}))},w=function(e,t,a,n,c){return e.preventDefault(),new Promise(function(){var e=Object(l.a)(o.a.mark((function e(n,r){var s,i,l,u,m,b,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},t({type:"one_value",nameObj:"validationFinished",payload:"not"}),e.next=4,k(c);case 4:return i=e.sent,l=Object.keys(i).length,t({type:"one_value",nameObj:"sizeOfSubmittedObject",payload:l}),e.next=9,a(i,l);case 9:for(j in u=e.sent,m=u.arrayOfAllChecksVal,b=u.time,i)s="preparation_time"===j?Object(p.a)(Object(p.a)({},s),{},{preparation_time:b}):Object(p.a)(Object(p.a)({},s),{},Object(d.a)({},j,i[j].val));m.every((function(e){return!0===e}))?t({type:"one_value",nameObj:"validationFinished",payload:"ok"}):t({type:"one_value",nameObj:"validationFinished",payload:"error"}),n(s);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},C=a(41),T=a.n(C),S=c.a.createContext(),F={name:{val:"",sort:"text",check:""},preparation_time:{val:"00:15:00",sort:"time",check:""},type:{val:"",sort:"text",check:""},no_of_slices:{val:1,sort:"intNumber",check:"",min:1,max:30},diameter:{val:.1,sort:"floatNumber",check:"",min:.1,max:50},spiciness_scale:{val:1,sort:"intNumber",check:"",min:1,max:10},slices_of_bread:{val:1,sort:"intNumber",check:"",min:1}},L=Object(p.a)(Object(p.a)({},F),{},{outputStyle:{left:"0"},sizeOfSubmittedObject:0,validationFinished:"not",finalResponse:"Hungry?",loading:!1}),R=function(e,t){switch(t.type){case"input":return Object(p.a)(Object(p.a)({},e),{},Object(d.a)({},t.nameObj,Object(p.a)(Object(p.a)({},e[t.nameObj]),{},{val:t.payload})));case"input_check":return Object(p.a)(Object(p.a)({},e),{},Object(d.a)({},t.nameObj,Object(p.a)(Object(p.a)({},e[t.nameObj]),{},{check:t.payload})));case"one_value":return Object(p.a)(Object(p.a)({},e),{},Object(d.a)({},t.nameObj,t.payload));case"outputStyle":return Object(p.a)(Object(p.a)({},e),{},{outputStyle:Object(p.a)(Object(p.a)({},e.outputStyle),{},{left:t.payload})});case"reset":return Object(p.a)(Object(p.a)(Object(p.a)({},e),F),{},{outputStyle:{left:"0"},loading:!1});default:return e}};var M=function(){var e=Object(n.useReducer)(R,L),t=Object(u.a)(e,2),c=t[0],r=t[1],s=_(r).onValidation,i=Object(n.useRef)(),d=Object(n.useRef)([]),p=Object(n.useRef)({}),m=Object(n.useRef)(),b=Object(n.useRef)(),f=Object(n.useRef)(),h=Object(n.useRef)(),O=c.type,v=c.validationFinished,g=c.finalResponse,x=c.loading;Object(n.useEffect)((function(){}),[]),Object(n.useEffect)((function(){!function(e,t){var a=2500;void 0!==e&&null!==e&&e.forEach((function(e){var n=e.classList,c=Array.from(n).filter((function(e){return e.startsWith("hide")}));if(c.length>0){var r,s=c[0].substr(c[0].indexOf("-"));"name"!==(r=e.children.length>1?e.children[0].children[0].lastElementChild.getAttribute("name"):e.children[0].children[1].getAttribute("name"))&&"preparation_time"!==r&&"type"!==r?setTimeout((function(){e.classList.add("show"+s),e.classList.remove(c[0])}),100):setTimeout((function(){e.classList.add("show"+s),e.classList.remove(c[0])}),"name"===r?a:"preparation_time"===r?3200:3900)}void 0!==t&&null!==t&&t.classList.contains("hide-down")&&setTimeout((function(){t.classList.add("show-down"),t.classList.remove("hide-down")}),4600)}))}(d.current,f.current)}),[O]),Object(n.useEffect)((function(){void 0!==i.current&&null!==i.current&&setTimeout((function(){i.current.classList.add("drop-fast"),i.current.classList.remove("hide-upper")}),1500),void 0!==h.current&&null!==h.current&&h.current.classList.add("hello")}),[]),Object(n.useEffect)((function(){void 0!==d.current&&null!==d.current&&d.current.forEach((function(e){if("range"===e.getAttribute("type")){var t=e.getAttribute("value");N(t,e,"%",r)}}))}),[O]),Object(n.useEffect)((function(){var e={method:"POST",url:"https://jsonplaceholder.typicode.com/posts",headers:{"Content-type":"application/json"},data:p.current};!function(e,t,a,n,c,r){"ok"===e?(n=JSON.stringify(n),console.log("Data to be send:"),console.log(n),c.classList.remove("bad"),c.classList.add("wait"),a({type:"one_value",nameObj:"loading",payload:!0}),r.disabled=!0,T()(t).then((function(e){console.log(e.data),c.classList.remove("wait"),c.classList.add("fine"),a({type:"reset",payload:""}),a({type:"one_value",nameObj:"finalResponse",payload:"Your order has been sent successfully!"}),r.disabled=!1})).catch((function(e){console.log(e.message),a({type:"one_value",nameObj:"loading",payload:!1}),c.classList.remove("wait"),c.classList.add("bad"),a({type:"one_value",nameObj:"finalResponse",payload:e.message}),r.disabled=!1}))):"error"===e&&(c.classList.remove("fine"),c.classList.add("bad"),a({type:"one_value",nameObj:"finalResponse",payload:"There is a mistake!"}))}(v,e,r,p.current,h.current,f.current),"ok"===v&&(p.current={})}),[v]);var k=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,r,s,p.current,c);case 2:p.current=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(n.useCallback)((function(e){e&&!d.current.includes(e)&&d.current.push(e)}),[O]),F=Object(j.jsx)("img",{alt:O.val,className:"photo hanging",src:""!==O.val?a(150)("./".concat(O.val,".jpg")).default:""}),M=Object(j.jsx)("p",{className:"reply",ref:h,children:x?"Wait...":g});return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h2",{className:"title hide-upper",ref:i,children:"Let's have a delicious meal!"}),Object(j.jsxs)("div",{className:"dishes flex",ref:b,children:[Object(j.jsx)(S.Provider,{value:{onState:c,onDispatch:r,onChanging:function(e){!function(e,t,a,n){"not"!==t&&(n({type:"one_value",nameObj:"finalResponse",payload:"Hungry?"}),n({type:"one_value",nameObj:"validationFinished",payload:"not"})),"range"===e.target.type&&N(e.target.value,e.target,"%",n);var c=e.target.name;"no_of_slices"===c||"spiciness_scale"===c||"slices_of_bread"===c?n({type:"input",nameObj:e.target.name,payload:parseInt(e.target.value)}):"diameter"===c?n({type:"input",nameObj:e.target.name,payload:parseFloat(e.target.value)}):"type"===c?(a.current=[],n({type:"input",nameObj:e.target.name,payload:e.target.value})):n({type:"input",nameObj:e.target.name,payload:e.target.value})}(e,v,d,r)},onAddToInputRef:C,onInputRef:d.current},children:Object(j.jsx)(y,{onTypeVal:O.val,onSubmit:k,ref:f})}),Object(j.jsx)("div",{className:"image",children:Object(j.jsx)("div",{className:"answer mrg-x-auto",ref:m,children:x||"not"!==v||""===O.val?M:F})})]})]})})},z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,158)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(M,{})}),document.getElementById("root")),z()},49:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){}},[[157,1,2]]]);
//# sourceMappingURL=main.5d698502.chunk.js.map